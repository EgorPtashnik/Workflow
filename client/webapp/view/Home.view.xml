<mvc:View
  controllerName='client.controller.Home'
  displayBlock='true'
  xmlns:dnd='sap.ui.core.dnd'
  xmlns:core='sap.ui.core'
  xmlns:c='client.custom'
  xmlns='sap.m'
  xmlns:mvc='sap.ui.core.mvc'>
  <Page floatingFooter='true' showHeader='false'>

    <VBox class='sapUiTinyMargin project_list_wrapper'>
      <List items='{
        path: "store>/projects",
        sorter: {path: "createdAt"}}'
        noDataText='{i18n>noProjects}'>
        <headerToolbar>
          <OverflowToolbar>
            <Title text='{i18n>projects}'/>
            <ToolbarSpacer/>
            <SearchField width='15rem' value='{state>/projectNameFilter}'/>
            <Button icon='sap-icon://add'
              tooltip='{i18n>createNewProject}'
              press='onPressCreate'/>
          </OverflowToolbar>
        </headerToolbar>
        <CustomListItem type='Navigation'
          press='onGoToProject'
          visible='{=${state>/projectNameFilter}? ${store>name}.toLowerCase().includes(${state>/projectNameFilter}.toLowerCase())? true : false : true}'>
          <HBox  class='sapUiTinyMargin'
            alignItems='Center'>
            <core:Icon class='sapUiTinyMarginEnd'
              size='2rem'
              src='sap-icon://responsive'/>
            <VBox>
              <Title text='{store>name}'/>
              <Text text='{store>desc}'/>
            </VBox>
          </HBox>
        </CustomListItem>

        <dragDropConfig>
          <dnd:DragInfo sourceAggregation='items'/>
        </dragDropConfig>
      </List>
    </VBox>

    <VBox class='fixed_btn_wrapper'>
      <c:DropButton text='{i18n>delete}'
        icon='sap-icon://delete'
        type='Reject'>
        <c:dragDropConfig>
          <dnd:DropInfo drop='onDelete' dropEffect='Link'/>
        </c:dragDropConfig>
      </c:DropButton>
    </VBox>

    <footer>
      <Toolbar id='idFooter'
        class='scale_out'
        visible='{state>/showFooter}'>
        <Input id='idProjectInput'
          submit='onPressSubmit'
          value='{state>/newProjectName}'
          placeholder='{i18n>newProjectName}'/>
        <Input value='{state>/newProjectDesc}'
          submit='onPressSubmit'
          placeholder='{i18n>newProjectDesc}'/>
        <Button type='Emphasized' text='{i18n>submit}' press='onPressSubmit'/>
          <Button type='Reject' text='{i18n>cancel}' press='onPressCancel'/>
      </Toolbar>
    </footer>
  </Page>
</mvc:View>
